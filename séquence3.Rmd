---
title: "Le rapport au passé à l’ère numérique, le Centenaire de la Première Guerre mondiale sur Twitter"
author: "UE de méthodologies et pratiques numériques (H44HI00), notes de travaux dirigés."
date: ""
output:
  html_document:
    theme: spacelab
    toc: yes
    toc_depth: 3
    toc_float: yes
    number_sections: true
    css: [style.css, font-awesome-4.7.0/css/font-awesome.css]
---
**UFR HHAA**    
**Université de Nantes** 

  

**Enseignant : Wilfrid Cariou**  
30012017 
v2017_3

******
 <br><br/>
```{r out.width = "40%" , , echo=FALSE, fig.cap="Pigeon espion allemand muni d'une caméra, probablement lors de la Première Guerre mondiale. Repéré à https://fr.wikipedia.org/wiki/Pigeon_photographe", fig.align='center'}


knitr::include_graphics(rep("figures/Bundesarchiv_Bild_183-R01996,_Brieftaube_mit_Fotokamera_cropped.jpg"))
```
 <br><br/>


```{block, type='rmdcomment'}
Versions des logiciels et langages mentionnés :  

* R 3.3x & R Studio 1.+  
* LibO Calc 5.2  
* Gephi 9.1  
* Voyant tools
````
 <br><br/>


# Quelques mots sur Twitter

Il s'agira de  caractériser brièvement Twitter.

```{block, type='rmdskills'}
**Le point sur les connaissances**

* Twiter : 
    * date de création ;
    * nombre estimé d'utilisateurs actifs ;
    * caractéristiques du réseau : 
        * microblogging (140 *car.*) ;
        * orienté et asymétrique (*followers*, *followings*) ;
        * profils publics (*timeline*) et semi-publics (*direct messages*).

```
# Modalités d'accès aux données

L'accès à Twitter s'effectue par le biais de son api *rest*. Nous utiliserons des instructions écrites en R pour nous y connecter.  

```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**

* API *Rest* : 
    * comprendre le rôle que joue une api ; connaître les limites qu'impose l'api *Rest*. 

* Utilisation de R :
    * identifier dans un fichier **.Rmd** les sections écrites en langage naturel et les blocs d'instructions (*chunks*); exécuter des blocs d'instructions à l'aide de la commande **Run** ;  
    * exécuter les instructions nécessaires à la connexion à Twitter (*packages* twitteR et httr indispensables) ;
    * identifier une variable, le signe d'affectation, une fonction et les arguments qu'elle emploie  dans une instruction simple ;
    * prendre connaissance du succès de la connexion dans la **Console**.
</p>


* Gestion des fichiers :
    * En amont :  
        * créer un dossier de travail sur le lecteur **D:/Etudiants/Documents** ou n'importe quel lecteur amovible; télécharger depuis Madoc l'archive informatique de format **zip** ; la localiser dans le dossier **Téléchargement** ; déplacer l'archive dans le dossier de travail précédemment crée ; en extraire le contenu (plusieurs méthodes possibles) ; supprimer l'archive ; ouvrir le dossier correspondant et identifier le fichier **Rproj** permettant de lancer RStudio ; le lire pour lancer l'environnement R Studio.

     * Dans l'environnement R Studio :
          * identifier dans le **panneau  Files** le fichier  **Rmd** nécessaire à la connexion; savoir l'ouvrir dans un onglet du panneau **Code editing**.
             

```




# Utilisateur, tweets & fil d’actualités 

Le profil d'utilisateur est illustré par le fil d'actualités *timeline* de @Mission1418 . Dans un second temps, un échantillon du fil d'actualités est téléchargé en utilisant R, stocké sous la forme de fichier **csv** puis importé dans Libre Office Calc. L'affichage est ajusté et le nombre de caractères par tweet est calculé.


```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**


* Utilisation de  R :
      * ré-exécuter si besoin la connexion à Twitter; télécharger un échantillon du fil d'actualités (*Timeline*) relative au compte Mission1418; l'explorer visuellement avec le **panneau Environment**; savoir modifier plusieurs arguments.
      
</p>
* Utilisation de Calc :
    * savoir importer dans Calc un fichier de type **csv** en ajustant si nécessaire les paramètres d'importation ; 
    * savoir ajuster la visualisation de cellules de texte ;
    * compter le nombre de caractères par tweet à l'aide d'une fonction (identifier une fonction répondant à un besoin ; saisir une formule comprenant une fonction dans le tableur; la recopier "vers le bas").
</p>
* Gestion des fichiers : 
    * Dans l'environnement R Studio :  
          * identifier dans le **panneau  Files** le fichier  **Rmd** nécessaire au téléchargement du fil d'actualités (*Timeline*) de l'utilisateur Mission1418 ; savoir l'ouvrir dans un onglet du panneau **Code editing**.

    * En aval : 
        * identifier les fichiers **csv** stockant les données téléchargées depuis Twitter; savoir les ouvrir avec un éditeur de texte (type bloc-note ou Notepad ++) ; savoir les ouvrir avec le logiciel Libre Office Calc.
        * connaître les caractéristiques d'un fichier **csv** et identifier les séparateurs de champs de valeurs employés.
      
````


# Explorer le fil d'actualités par filtrage 



```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**  


* Utilisation de Calc :  
    * savoir utiliser **l'Autofiltre** (sélectionner la table; appliquer un ou plusieurs filtres; copier le résultat; annuler ou modifier les filtres).
````


# Importer, formater et convertir les valeurs horodatées

Les valeurs relatives à l'horodatage des tweets sont stockées selon la norme iso 8601 (YYYY-MM-DD hh:mm:ss) par Twitter.  
Leur reconnaissance à l'étape d'importation du fichier csv (identifier les nombres spéciaux) dans Calc engendre leur conversion dans un format numérique qui autorise différents formatages, calculs de durées et regroupements par périodes.  
Pour ce faire Calc comporte une fonctionnalité de regroupement des valeurs selon différentes temporalités. Cependant, grouper par jours ou par mois amène à une conversion des données au format texte et n'est pas sans conséquence sur la représentation de l'échelle du temps dans une représentation graphique. Afin de palier à ce biais , il peut être opportun de mener une conversion des valeurs au format YYYY-MM-DD hh:mm:ss en YYYY-MM-DD en effectuant une troncature.

```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**  


* Utilisation de Calc :  
    * Savoir de quelle manière Calc stocke les valeurs horodatées; modifier le format des valeurs horodatées; supprimer la partie hh:mm::ss par troncature.
````

# Résumer la Timeline par des tableaux, des calculs et des représentations graphiques

## Résumer une proportion

* Proportion des tweets et retweets.   
* Proportion de tweets évoquant Verdun.

```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**  

* Utilisation de Calc :  
    * Grouper en utilisant la **Table du Pilote**.
    
````

## Résumer une évolution

```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**  

* Utilisation de Calc :  
    * grouper (**Menu Données >Plan et groupe > Grouper (raccourcis f12**)) ;  
    * choisir, concevoir et mettre en forme un graphique chronologique (bâtons, zone; courbe) en fonction d'un modèle ;  
     * exporter dans des formats **png** et **svg** ;  
    * contrôler le résultat (visionneuse, page web, traitement de texte).
    
* formats d'images :
    * différencier **svg** et **png**.
    
````


```{r out.width = "100%" , , echo=FALSE, fig.cap=" "}
knitr::include_graphics(rep("figures/calc/timeline2.png"))
```

## Comparer des évolutions 

```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**  


* Utilisation de Calc : 
    * grouper en utilisant la **Table du Pilote** (2 variables) ;   
    * grouper (**Menu Données >Plan et groupe > Grouper (f12)**) ;  
    * concevoir une représentation graphique en respectant un modèle ;  
    * exporter dans des formats **png** et **svg** ;   
    * contrôler le résultat (visionneuse, page web, traitement de texte).
    
* formats d'images :
    * différencier **svg** et **png**.
````

```{r out.width = "100%" , , echo=FALSE, fig.cap=" "}
knitr::include_graphics(rep("figures/calc/timeline.png"))
```

## Résumer par une mesure de tendance centrale

* Calculer le nombre  moyen de tweets par jour à l'aide de la fonction `MOYENNE`.

# Explorer et résumer des tweets à l'aide d'un nuage de termes

Un nuage de termes constitue une représentation visuelle des termes de fréquence supérieure d'un *corpus* de texte. Les termes qui apparaissent le plus frequemment sont positionnés au centre du nuage et affichés avec un corps de caractère proportionnel à la feur fréquence.
De très nombreux outils de création de nuages de termes sont disponibles. Nous utiliserons l'application de fouille de texte en ligne Voyant tools pour ses fonctionnalités d'ajout de mots vides nécessaires au "débruitage" du *cirrus*.

```{r out.width = "100%" , , echo=FALSE, fig.cap="nuage de terme filtré de l'utilisateur @Mission1418 (décembre 2016)"}
knitr::include_graphics(rep("figures/voyant_tools/cirrus.svg"))
```


```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**  


* Utilisation de  Voyant tools : 
    * importer dans Voyant tools la colonne *text* par copier-coller ;
    * visualiser la colonne *text* sous la forme de nuage de termes ;
    * modifier la liste des mots vides ;
    * ajuster les effectifs des termes visualisés ; 
    * exporter le nuage de terme dans un format déterminé.
    
````

# Explorer et résumer des relations entre utilisateurs (rt, citations) sous forme de graphe 

```{block, type='rmdskills'}
**Les connaissances et compétences mobilisées**  

* Utilisation R : 
    * exécuter les instructions permettant d'effectuer une recherche dans Twitter;  
    * savoir modifier l'argument relatif au terme de recherche ;  
    * exécuter les instructions permettant de lister les relations entre les utilisateurs (rt et mentions).
    
    
* Utilisation de Gephi : 
    * importer dans Gephi le fichier *csv* contenant la liste précédemment créée avec R ;
    * Dupliquer les données de la colonne id dans la colonne label ;
    * Relever le nombre de nœuds et de liens (contexte) ;
    * Répartir les nœuds du graphe en fonctions de différents algorithmes ;
    * modifier l'aspect des nœuds et des labels en fonction de leur degré ;
    (couleur, proportionnalité) ;
    * ajuster la prévisualisation (notamment en réglant l'aspect) ;
    * exporter.

````

```{r out.width = "100%" , , echo=FALSE, fig.cap="Détail du graphe #1gm (décembre 2016) Ratio 100%"}
knitr::include_graphics(rep("figures/gephi/gephi_detail.png"))
```


